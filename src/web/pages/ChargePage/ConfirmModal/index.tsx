import { store } from './store';
import { Box, Modal, TouchableOpacity, Typography } from 'components';
import { COLORS } from 'constant';
import { observer } from 'mobx-react-lite';
import React from 'react';

type Props = {
  onFinish: () => void;
};

export const ConfirmModal = observer(({ onFinish }: Props) => {
  const { visible, hide } = store;

  function handleOk() {
    setTimeout(() => {
      hide();
      onFinish();
    }, 150);
  }

  return (
    <Modal
      onClose={hide}
      title="Желаете остановить заправку?"
      visible={visible}
      showCloseButton={false}
      titleAlign="center"
    >
      <Box marginBottom={8} marginTop={24}>
        <Box alignItems="center" justifyContent="center">
          <svg width="123" height="123" viewBox="0 0 123 123" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M61.5 0.500005C95.1894 0.500003 122.5 27.8106 122.5 61.5C122.5 95.1894 95.1894 122.5 61.5 122.5C27.8106 122.5 0.499999 95.1894 0.499997 61.5C0.499996 27.8106 27.8106 0.500006 61.5 0.500005Z"
              stroke="url(#paint0_linear_0_1)"
            />
            <path d="M63.3333 33L50 51H62L60.6667 63L74 45H62L63.3333 33Z" fill="#005EEB" />
            <path
              d="M48.4872 89.126C47.6938 89.126 46.9845 89.0233 46.3592 88.818C45.7338 88.6127 45.1878 88.3187 44.7212 87.936L45.1412 87.012C45.4678 87.2547 45.7945 87.46 46.1212 87.628C46.4572 87.7867 46.8165 87.908 47.1992 87.992C47.5818 88.0667 48.0112 88.104 48.4872 88.104C49.3178 88.104 49.9338 87.95 50.3352 87.642C50.7365 87.334 50.9372 86.9233 50.9372 86.41C50.9372 85.9713 50.7972 85.6353 50.5172 85.402C50.2372 85.1687 49.7472 84.982 49.0472 84.842L47.5772 84.548C46.6718 84.3613 45.9952 84.058 45.5472 83.638C45.1085 83.218 44.8892 82.6487 44.8892 81.93C44.8892 81.342 45.0385 80.8287 45.3372 80.39C45.6452 79.9513 46.0745 79.6107 46.6252 79.368C47.1758 79.1253 47.8152 79.004 48.5432 79.004C49.2432 79.004 49.8825 79.1113 50.4612 79.326C51.0398 79.5313 51.5345 79.8347 51.9452 80.236L51.5392 81.132C51.1005 80.74 50.6385 80.46 50.1532 80.292C49.6772 80.1147 49.1358 80.026 48.5292 80.026C47.7638 80.026 47.1572 80.194 46.7092 80.53C46.2705 80.8567 46.0512 81.3047 46.0512 81.874C46.0512 82.3313 46.1912 82.6907 46.4712 82.952C46.7512 83.204 47.2132 83.3953 47.8572 83.526L49.3412 83.82C50.2932 84.016 50.9932 84.31 51.4412 84.702C51.8892 85.094 52.1132 85.6447 52.1132 86.354C52.1132 86.8953 51.9638 87.376 51.6652 87.796C51.3758 88.216 50.9605 88.5427 50.4192 88.776C49.8778 89.0093 49.2338 89.126 48.4872 89.126ZM56.3285 89.126C55.6378 89.126 55.1105 88.93 54.7465 88.538C54.3825 88.1367 54.2005 87.5347 54.2005 86.732V82.854H52.8285V81.972H54.2005V80.054L55.3345 79.732V81.972H57.3505V82.854H55.3345V86.606C55.3345 87.166 55.4278 87.5673 55.6145 87.81C55.8105 88.0433 56.0998 88.16 56.4825 88.16C56.6598 88.16 56.8185 88.146 56.9585 88.118C57.0985 88.0807 57.2245 88.0387 57.3365 87.992V88.944C57.2058 89 57.0471 89.042 56.8605 89.07C56.6831 89.1073 56.5058 89.126 56.3285 89.126ZM61.5466 89.126C60.8746 89.126 60.2866 88.9813 59.7826 88.692C59.288 88.3933 58.9053 87.9733 58.6346 87.432C58.364 86.8813 58.2286 86.2327 58.2286 85.486C58.2286 84.73 58.364 84.0813 58.6346 83.54C58.9053 82.9987 59.288 82.5833 59.7826 82.294C60.2866 81.9953 60.8746 81.846 61.5466 81.846C62.228 81.846 62.816 81.9953 63.3106 82.294C63.8146 82.5833 64.202 82.9987 64.4726 83.54C64.7526 84.0813 64.8926 84.73 64.8926 85.486C64.8926 86.2327 64.7526 86.8813 64.4726 87.432C64.202 87.9733 63.8146 88.3933 63.3106 88.692C62.816 88.9813 62.228 89.126 61.5466 89.126ZM61.5466 88.202C62.2186 88.202 62.7506 87.9733 63.1426 87.516C63.5346 87.0493 63.7306 86.3727 63.7306 85.486C63.7306 84.59 63.53 83.9133 63.1286 83.456C62.7366 82.9893 62.2093 82.756 61.5466 82.756C60.884 82.756 60.3566 82.9893 59.9646 83.456C59.5726 83.9133 59.3766 84.59 59.3766 85.486C59.3766 86.3727 59.5726 87.0493 59.9646 87.516C60.3566 87.9733 60.884 88.202 61.5466 88.202ZM66.6607 92.024V83.596C66.6607 83.3347 66.6467 83.0687 66.6187 82.798C66.6 82.518 66.5767 82.2427 66.5487 81.972H67.6407L67.7947 83.638H67.6267C67.776 83.0873 68.0794 82.6533 68.5367 82.336C68.994 82.0093 69.54 81.846 70.1747 81.846C70.8094 81.846 71.3554 81.9907 71.8127 82.28C72.2794 82.5693 72.6434 82.9847 72.9047 83.526C73.166 84.0673 73.2967 84.7207 73.2967 85.486C73.2967 86.242 73.166 86.8907 72.9047 87.432C72.6527 87.9733 72.2934 88.3933 71.8267 88.692C71.36 88.9813 70.8094 89.126 70.1747 89.126C69.5494 89.126 69.008 88.9673 68.5507 88.65C68.0934 88.3327 67.79 87.8987 67.6407 87.348H67.7947V92.024H66.6607ZM69.9507 88.202C70.6227 88.202 71.1547 87.9733 71.5467 87.516C71.948 87.0493 72.1487 86.3727 72.1487 85.486C72.1487 84.59 71.948 83.9133 71.5467 83.456C71.1547 82.9893 70.6227 82.756 69.9507 82.756C69.288 82.756 68.756 82.9893 68.3547 83.456C67.9627 83.9133 67.7667 84.59 67.7667 85.486C67.7667 86.3727 67.9627 87.0493 68.3547 87.516C68.756 87.9733 69.288 88.202 69.9507 88.202ZM76.0975 86.424V86.018C76.0975 85.542 76.1861 85.0987 76.3635 84.688C76.5501 84.268 76.8768 83.7967 77.3435 83.274C77.7075 82.8727 77.9641 82.5227 78.1135 82.224C78.2628 81.916 78.3375 81.6033 78.3375 81.286C78.3375 80.8847 78.1928 80.572 77.9035 80.348C77.6141 80.1147 77.2128 79.998 76.6995 79.998C76.3355 79.998 75.9855 80.0493 75.6495 80.152C75.3135 80.2453 74.9915 80.376 74.6835 80.544V79.494C74.9915 79.3353 75.3275 79.214 75.6915 79.13C76.0648 79.046 76.4381 79.004 76.8115 79.004C77.3435 79.004 77.8101 79.0927 78.2115 79.27C78.6128 79.438 78.9255 79.6853 79.1495 80.012C79.3828 80.3293 79.4995 80.7213 79.4995 81.188C79.4995 81.4867 79.4528 81.776 79.3595 82.056C79.2661 82.3267 79.1215 82.602 78.9255 82.882C78.7295 83.1527 78.4775 83.4513 78.1695 83.778C77.7121 84.2447 77.3901 84.6553 77.2035 85.01C77.0168 85.3553 76.9048 85.71 76.8675 86.074L76.8255 86.424H76.0975ZM75.7335 89V87.572H77.1755V89H75.7335Z"
              fill="#005EEB"
            />
            <defs>
              <linearGradient
                id="paint0_linear_0_1"
                x1="-2.68825e-06"
                y1="61.5"
                x2="123"
                y2="61.5"
                gradientUnits="userSpaceOnUse"
              >
                <stop stopColor="#D2E4FF" />
                <stop offset="1" stopColor="#005EEB" />
              </linearGradient>
            </defs>
          </svg>
        </Box>
        <Box marginTop={20}>
          <TouchableOpacity onPress={handleOk}>
            <Box
              paddingTop={12}
              paddingBottom={12}
              backgroundColor={COLORS.BLUE}
              justifyContent="center"
              alignItems="center"
              borderRadius={8}
            >
              <Typography color={COLORS.WHITE} size={18} weight={700} lineHeight={24}>
                Да
              </Typography>
            </Box>
          </TouchableOpacity>
        </Box>
        <Box marginTop={20} justifyContent="center" alignItems="center">
          <TouchableOpacity onPress={hide}>
            <Typography color={COLORS.BLUE} size={16} weight={700} lineHeight={20}>
              Отмена
            </Typography>
          </TouchableOpacity>
        </Box>
      </Box>
    </Modal>
  );
});
